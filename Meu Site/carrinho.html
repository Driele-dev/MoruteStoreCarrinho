<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Carrinho - Morute Store</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <div class="container mt-5">
    <h2 class="mb-4">Seu Carrinho</h2>
    <ul id="listaCarrinho" class="list-group mb-3"></ul>

    <p><strong>Total:</strong> R$ <span id="totalCarrinho">0.00</span></p>

    <div class="mb-3">
      <label for="parcelas" class="form-label">Parcelar em:</label>
      <select id="parcelas" class="form-select" onchange="atualizarParcelamento()">
        <option value="1">1x sem juros</option>
        <option value="2">2x sem juros</option>
        <option value="3">3x sem juros</option>
        <option value="4">4x com juros (5%)</option>
        <option value="5">5x com juros (10%)</option>
        <option value="6">6x com juros (15%)</option>
      </select>
    </div>

    <p><strong>Valor da parcela:</strong> R$ <span id="valorParcela">0.00</span></p>

    <div class="mb-3">
      <label for="pagamento" class="form-label">Forma de pagamento</label>
      <select id="pagamento" class="form-select">
        <option value="Cartão de Crédito">Cartão de Crédito</option>
        <option value="Boleto">Boleto</option>
        <option value="Pix">Pix</option>
      </select>
    </div>

    <button class="btn btn-success w-100" onclick="finalizarCompra()">Finalizar Compra</button>
  </div>

  <script>
    const carrinho = JSON.parse(localStorage.getItem('carrinho')) || [];
    const lista = document.getElementById('listaCarrinho');
    const totalSpan = document.getElementById('totalCarrinho');
    const valorParcela = document.getElementById('valorParcela');
    const parcelasSelect = document.getElementById('parcelas');

    function atualizarCarrinho() {
      lista.innerHTML = '';
      let total = 0;

      carrinho.forEach((item, index) => {
        total += item.preco;
        const li = document.createElement('li');
        li.className = 'list-group-item d-flex justify-content-between align-items-center';
        li.innerHTML = `
          ${item.nome} - R$ ${item.preco.toFixed(2)}
          <button class="btn btn-sm btn-danger" onclick="removerCarrinho(${index})">Remover</button>
        `;
        lista.appendChild(li);
      });

      totalSpan.textContent = total.toFixed(2);
      localStorage.setItem('carrinho', JSON.stringify(carrinho));
      atualizarParcelamento();
    }

    function atualizarParcelamento() {
      const parcelas = parseInt(parcelasSelect.value);
      let total = carrinho.reduce((soma, item) => soma + item.preco, 0);
      let juros = 0;
      if (parcelas > 3) {
        if (parcelas === 4) juros = 0.05;
        if (parcelas === 5) juros = 0.10;
        if (parcelas === 6) juros = 0.15;
        total += total * juros;
      }
      valorParcela.textContent = (total / parcelas).toFixed(2);
    }

    function removerCarrinho(index) {
      carrinho.splice(index, 1);
      atualizarCarrinho();
    }

    function finalizarCompra() {
      const forma = document.getElementById('pagamento').value;
      if (carrinho.length === 0) {
        alert('Seu carrinho está vazio!');
        return;
      }
      alert(`Compra finalizada com ${forma}. Obrigado por comprar na Morute Store!`);
      carrinho.length = 0;
      atualizarCarrinho();
    }

    atualizarCarrinho();
  </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>
